var csvLink="https://docs.google.com/spreadsheets/d/e/2PACX-1vSpgPFjsVbVak8MuXxOYEV8ezmsXC38Ki13xHcGwVt3YbFRoRSKwiRemMk9lCGOKRsDCrlYtD2ePg7V/pub?output=csv",request=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),loading=!0;function CSVtoArray(e){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test(e))return null;var r=[];return e.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,function(e,t,s,n){return void 0!==t?r.push(t.replace(/\\'/g,"'")):void 0!==s?r.push(s.replace(/\\"/g,'"')):void 0!==n&&r.push(n),""}),/,\s*$/.test(e)&&r.push(""),r}function make_date_friendly(e){var t=new Date,s=(t.getMonth()+1).toString()+"/"+t.getDate().toString()+"/"+t.getFullYear().toString();t.setDate(t.getDate()-1);var n=(t.getMonth()+1).toString()+"/"+t.getDate().toString()+"/"+t.getFullYear().toString();return e==s?"Today":e==n?"Yesterday":e}function addCanteen(e,t,s){loading&&(document.querySelector("#skeleton").classList.add("hide"),loading=!1);var n=document.getElementsByTagName("section");for(var r in n)"object"==typeof n[r]&&(n[r].innerHTML+="<div class=canteen-card><span class=canteen-name>"+t+"</span><br /><span class=timestamp>"+e+"</span><br /><br/><span class=menu>"+s[r]+"</span></div>")}function move(){var e=(new Date).getHours(),t=0,s=document.getElementsByTagName("section");22<=e||e<10||(t=10<=e&&e<14?1:14<=e&&e<18?2:3);var n="-"+t.toString()+"00vw";s[0].style["margin-left"]=n,s[1].style["margin-left"]=n,s[2].style["margin-left"]=n,s[3].style["margin-left"]=n}function setToReload(){var e=(new Date).getHours(),t=0,t=e<9?60*(9-e)*60*1e3:e<14?60*(14-e)*60*1e3:e<19?60*(19-e)*60*1e3:60*(24-e+9)*60*1e3;setTimeout(function(){history.go()},t)}request.open("GET",csvLink,!0),request.send(),request.onload=function(e){if(4===request.readyState)if(200===request.status){request.responseText;for(var t=0,s=request.responseText.split("\r").slice(1);t<s.length;t++){var n=CSVtoArray(s[t]),r=n[0].split(" ");addCanteen(r=make_date_friendly(r[0])+" "+r[1],n[1],[n[2],n[3],n[4],n[5]])}move(),setToReload()}else console.error(request.statusText)};