var csvLink="https://docs.google.com/spreadsheets/d/e/2PACX-1vSpgPFjsVbVak8MuXxOYEV8ezmsXC38Ki13xHcGwVt3YbFRoRSKwiRemMk9lCGOKRsDCrlYtD2ePg7V/pub?output=csv",kaveri_form_link="https://docs.google.com/forms/d/e/1FAIpQLSerO8nzg2LGAQbuBf4Eoz_te1oJZ8Qkzo_zXc1cYswwQ0oh1g/viewform?usp=sf_link",request=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),loading=!0;function CSVtoArray(e){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test(e))return null;var n=[];return e.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,function(e,t,s,a){return void 0!==t?n.push(t.replace(/\\'/g,"'")):void 0!==s?n.push(s.replace(/\\"/g,'"')):void 0!==a&&n.push(a),""}),/,\s*$/.test(e)&&n.push(""),n}function make_date_friendly(e){var t=new Date,s=(t.getMonth()+1).toString()+"/"+t.getDate().toString()+"/"+t.getFullYear().toString();t.setDate(t.getDate()-1);var a=(t.getMonth()+1).toString()+"/"+t.getDate().toString()+"/"+t.getFullYear().toString();return e==s?"Today":e==a?"Yesterday":e}function addCanteen(e,t,s){loading&&(document.querySelector("#skeleton").classList.add("hide"),loading=!1);var a=document.getElementsByTagName("section");for(var n in a)"object"==typeof a[n]&&(a[n].innerHTML+="Kaveri"==t?"<div class=canteen-card><div class=card-head><span class=canteen-name>"+t+"</span><a class=feedback href='"+kaveri_form_link+"' target=__blank>Feedback</a></div><span class=timestamp>"+e+"</span><br /><br/><span class=menu>"+s[n]+"</span></div>":"<div class=canteen-card><span class=canteen-name>"+t+"</span><br /><span class=timestamp>"+e+"</span><br /><br/><span class=menu>"+s[n]+"</span></div>")}function move(){var e=(new Date).getHours(),t=0,s=document.getElementsByTagName("section");22<=e||e<10||(t=10<=e&&e<14?1:14<=e&&e<18?2:3);var a="-"+t.toString()+"00vw";s[0].style["margin-left"]=a,s[1].style["margin-left"]=a,s[2].style["margin-left"]=a,s[3].style["margin-left"]=a}function setToReload(){var e=(new Date).getHours(),t=0,t=e<9?60*(9-e)*60*1e3:e<14?60*(14-e)*60*1e3:e<19?60*(19-e)*60*1e3:60*(24-e+9)*60*1e3;setTimeout(function(){history.go()},t)}request.open("GET",csvLink,!0),request.send(),request.onload=function(e){if(4===request.readyState)if(200===request.status){request.responseText;for(var t=0,s=request.responseText.split("\r").slice(1);t<s.length;t++){var a=CSVtoArray(s[t]),n=a[0].split(" ");addCanteen(n=make_date_friendly(n[0])+" "+n[1],a[1],[a[2],a[3],a[4],a[5]])}move(),setToReload()}else console.error(request.statusText)};